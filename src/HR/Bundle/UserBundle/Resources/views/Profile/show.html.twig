{% extends 'HRUserBundle::layout.html.twig' %}

{% block user_content %}
    <div class="profile">

        <div class="card">
            <div class="avatar-wrapper">
                <img src="{{ asset(user.avatarBigUrl) }}" class="avatar"/>
            </div>

            <h1>{{ user.screenName }}</h1>

            {% if user.bio %}
            <p class="metadata">{{ user.bio|substring(100) }}</p>
            {% endif %}
            <p class="metadata">发布 {{ user.numJobs }} 个职位</p>
            <p class="metadata">注册于 {{ user.createdAt|date('Y-m-d') }}</p>
        </div>
    </div>
{% endblock %}

{% block ext_content %}
    <div class="module">
        <div class="flex-module">
            <div class="module-header">
                <h2>{{ user.screenName }}发布的最新职位</h2>
            </div>

            {% if pager.hasResults %}
                <ul class="item-list">
                    {% for job in pager.getResults %}
                        <li class="item hidden-avatar">
                            <div class="item-header">
                                <div class="meta">在 {{ job.createdAt|date('Y-m-d') }} 发布的职位</div>

                                <div class="title">
                                    <a href="{{ path('job_show', {'jobId': job.id}) }}" target="_blank">{{ job.title }}</a>
                                    <span class="divider">•</span> <span class="company">{{ job.companyName }}</span>
                                    <span class="divider">•</span> <span class="region">{{ job.city }}</span>
                                </div>
                            </div>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="text-muted">没有发布任何职位</p>
            {% endif %}

            {% if pager.isPaginable %}
                <p class="text-right text-muted">
                    <a href="{{ path('profile_jobs', {'userId': user.id}) }}">更多职位 &gt;&gt;</a></p>
            {% endif %}
        </div>
    </div>
    <!-- /module -->
{% endblock %}